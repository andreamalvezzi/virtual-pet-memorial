// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

// Looking for ways to speed up your queries, or scale easily with your serverless or edge functions?
// Try Prisma Accelerate: https://pris.ly/cli/accelerate-init

// ==============================
// PRISMA SCHEMA
// ==============================

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

// ==============================
// ENUM
// ==============================

enum MemorialPlan {
  FREE
  MEDIUM
  PLUS
}

// ==============================
// MODELS
// ==============================

model User {
  id        Int        @id @default(autoincrement())
  email     String     @unique
  password  String
  role      String     @default("free")

  createdAt DateTime   @default(now())

  memorials Memorial[]
}

model Memorial {
  id        Int      @id @default(autoincrement())
  userId    Int
  user      User     @relation(fields: [userId], references: [id])

  // ==========================
  // DATI DEL PET
  // ==========================
  petName   String
  species   String

  // ==========================
  // MOMENTO DEL RICORDO
  // ==========================
  deathDate DateTime

  // ==========================
  // TESTO MEMORIALE
  // ==========================
  epitaph   String

  // ==========================
  // MEDIA
  // ==========================
  imageUrl      String?

  // === G1: NUOVI CAMPI ===
  plan          MemorialPlan @default(FREE)
  graveStyle    String       @default("classic")
  galleryImages String[]     @default([])
  videoUrls     String[]     @default([])

  // ==========================
  // VISIBILITÃ€
  // ==========================
  isPublic Boolean @default(false)

  // ==========================
  // URL PUBBLICO
  // ==========================
  slug     String  @unique

  // ==========================
  // META
  // ==========================
  createdAt DateTime @default(now())
}
